outputs:
  default:
    type: elasticsearch
    hosts: ["http://3.109.139.197:9200"]
    username: "elastic"
    password: "shaurya"
    ssl.verification_mode: none  # Use only if you don't use TLS or have self-signed certs

agent:
  monitoring:
    enabled: true

inputs:
  - type: filestream
    id: spring-logfile
    paths:
      - /logs/app.log
    parsers:
      - ndjson:
          target: ""
          overwrite_keys: true
    processors:
      - add_fields:
          target: ""
          fields:
            component: "spring-app"
            environment: "prod"

  - type: system/metrics
    data_stream:
      namespace: default
    streams:
      - metricsets: ["cpu", "memory", "network", "process"]
        period: 10s

  - type: http
    id: app-health
    schedule: "@every 15s"
    urls: ["http://localhost:8080/actuator/health"]
    check.response:
      status: 200
      json:
        - path: status
          equals: "UP"
    data_stream:
      type: synthetics
      dataset: http.up
